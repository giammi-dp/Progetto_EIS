
Per iniziare, è necessario disporre di Python 3.10 o superiore, di una GPU NVIDIA con supporto CUDA e di installare i pacchetti elencati nel file requirements.txt. La struttura della directory è progettata in questo modo: la cartella ASNR-MICCAI-BraTS2023-Challenge-TrainingData contiene le immagini BraTS2023, mentre medical datasets ospita il dataset MultiCaRe. La cartella models/monai\_brats\_mri\_segmentation include i pesi MONAI del modello SegResNet per la segmentazione MRI, mentre evaluation\_results raccoglie i file di valutazione. I due approcci di retrieval, VRAG e MMRAG, sono organizzati in cartelle separate (VRAG/ e MMRAG/): all’interno di MMRAG/, oltre a script dedicati a test e training per ciascun dataset e per la pipeline, sono presenti i database vettoriali (cartella vector\_db), i pesi del modello di fusione multimodale (pesi\_fusion), i metadati e i report del dataset RadGenome (json\_e\_metadata\_report\_medici). Gli script principali da eseguire sono main.py e main\_chat.py, che richiamano pipeline.py (in cui viene eseguita tutta la pipeline di segmentazione, retrieval e generazione report). Il file main\_chat.py contiene un'interfaccia grafica realizzata con Gradio, in cui è possibile caricare una cartella .zip contenente i canali dell'immagine (t1c, t1n, t2f, t2w) oppure selezionare l'immagine tra quelle contenute in ASNR-MICCAI-BraTS2023-Challenge-TrainingData. Inoltre è possibile inserire un breve prompt testuale che va a concatenarsi con quello usato nella pipeline. I file main si trovano in questa cartella a causa di problemi di riferimento con i link ai file json e alle immagini. Anche la cartella VRAG/ contiene i file di test e la classe VRAG. Bisogna sottolineare che le due tecniche di retrieval sono implementate in 2 file, uno per ogni dataset, (MMRAG\_multicare.py, MMRAG\_rad\_genome.py per la MMRAG e VRAG\_multicare.py, VRAG\_rad\_genome.py per la VRAG) in quanto MultiCaRe e BraTS2023 contengono immagini in formati diversi. Infine, il file segmentator.py contiene la classe Segmentator, usata per la segmentazione delle immagini, mentre utils.py contiene i metodi per la valutazione automatica dei report generati e per la pulizia dei testi di riferimento.
